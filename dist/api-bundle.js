module.exports=function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var t={};return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="/dist/",n(n.s=9)}([function(e,n){e.exports=require("firebase/auth")},function(e,n){e.exports=require("rxjs/Rx")},function(e,n){e.exports=require("firebase/app")},function(e,n){e.exports=require("firebase/database")},function(e,n){e.exports=require("isomorphic-fetch")},function(e,n){e.exports=require("firebase/messaging")},function(e,n){e.exports=require("googleapis")},function(e,n){e.exports=require("bcrypt-nodejs")},function(e,n){e.exports=require("jsonwebtoken")},function(e,n,t){"use strict";function r(e){return 0===F.apps.length&&(console.log(e),F.initializeApp(e)),F.database()}function o(){return{apiKey:process.env.FIREBASE_API_KEY,authDomain:process.env.FIREBASE_DOMAIN_KEY,databaseURL:process.env.FIREBASE_DATABASE_URL,projectId:process.env.FIREBASE_PROJECT_ID,storageBucket:process.env.FIREBASE_STORAGE_BUCKET,messagingSenderId:process.env.FIREBASE_MESSAGING_SENDER_ID}}function i(){return{type:"service_account",project_id:"kevchat-a5b6f",private_key_id:"dc4806e84c1c43064e683884b9e62a2bb12e3319",private_key:"-----BEGIN PRIVATE KEY-----\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDU4J75tKyjWSQX\nWL4qww8i6xW51NTEdxxZXmYt3WuYpCpfFzpYU40KggPsTGl55cqzoOY3Py7g1mjm\nbTwCAujc7w2ceQnoAodZmQy9V8q3ygb+1rtNjjQF0SIAN3eoYbrXBfNYAhlrZS3G\n8mTJdvbsBsfYXn+NbazXzIvEuI2RZyRZkMtLNd+LklCfF9dIGX9Z/hyRIikqYt49\npanK8iTBI/ux6W62RPIfpuPWvUCdabVOJTfZ19qJLsi3S5kzqRTwzeTFU+fa3SUv\n9cUBdnmWEgfmWo9I8/6s+Hdt5R+QkrrMgfn0DOd0HD5x5zkwAdS+Sk87eVCOtUny\nb9zlofFNAgMBAAECggEAXFJwT95eEte5kdCAZN5EpcGrofTeM7humImaqeCB5eio\noaXavWy62ehKGESJZ/7TOrUYsrQZuhPy2aBdKoglgo/AaPCLbc4O8jowrrsw5SVe\nhE4PXFLEWBN7efmUUPfVhqSDhVMfwBZY1JPSRxdrfjBwonNVQTpkABErOq1JZFm6\nt2qHNFDMspwhYrbChYZN9Ijbvpv64XiejYM/rP/+Dpb5o1LwpyL6vJ8Z0xj9g65l\ncQZcITXgdi+lQDzbCR9sQ+2n/xlMiutFTsFqhL6giuQcNU/eD0l6wp4wPj8PqRMr\n3fLgPdErdTlB7rYPo1No3fuGAoz8yo9UpwLykjhCdwKBgQD3EmrJ6CHueyNqj7ek\nlHivjdSbyxjCeMwur5M1w+dqKBwDXAOtQ+sBm0IZ8fZHLCxJFhlAM6ejlCZiF0O2\nij2r2lr4X8/IW2ESeOTXJx8mvuLIA0T7865GupLM6hYoztodVTUsdv3uTz2/wmlR\nPWZecz7TTVd6QvPfsaOtY2wccwKBgQDckeGkP2D6XDSo538G1vtlD+aK+EDA4XcN\nmrXrLHbaMFxwjr5/w0g14h3x6gxIJwvGe5d2CwVk4zUEcihO1d+tfgePr4vKiuAp\nKQGrO0bu0FC9smIN/1GUjHYhzIqUWHeryA8CQQTbHs0OVm5hIfhKW7RGPl24oZBK\nC7I8XnoLPwKBgQCVhEOzpBLEqygnmIldw6u1MXN0RFfbeBa4OfAwHTmx+EvbjJd9\nBxj0g+xgnxiWwZibMhBd1eShDUqdGc8UbFwd36olnHW1nfcEorx5p2cmn2XF/JSG\nlFTm4IluEEsQrv03uxTOr8PDr5iCrzfkve9xQPTIEonZpyLGQE34463NGQKBgFkb\nZjjgkeES1wNVYm/08eLGJbEG0cIaU+pfEhdMA0fqOa4PPM6Iqed6zfYpQ4TyoUMy\nMuIxWaCEWarOI5KVvKNuQse9d4//wsdeFZqDfAiGh9fa9NoKx35nsGG/LEz54H65\nd7bFZZzQOK8OI9GB07jWi2HFWD96pbwENaFF2bApAoGBANUnVJxW0fJMh/9sYwQH\nmedP7aV7nLIFdG988p53wdvQN7CF40wCOckvW/bG/I83a7dibSj274EYSIa1deWb\nCWS+UsiNqMKgQgtzk4Id4AmLF0AVksJKH36+cP2PLexNdocL4Ku9T71IqsZn0JvC\nWaIK9klqvoH0aLg5XOJw5Zyg\n-----END PRIVATE KEY-----\n",client_email:"firebase-adminsdk-7fhc2@kevchat-a5b6f.iam.gserviceaccount.com",client_id:"112694782557192835677",auth_uri:"https://accounts.google.com/o/oauth2/auth",token_uri:"https://accounts.google.com/o/oauth2/token",auth_provider_x509_cert_url:"https://www.googleapis.com/oauth2/v1/certs",client_x509_cert_url:"https://www.googleapis.com/robot/v1/metadata/x509/firebase-adminsdk-7fhc2%40kevchat-a5b6f.iam.gserviceaccount.com"}}function s(e){return 0===F.apps.length&&F.initializeApp(e),F.auth().signInWithEmailAndPassword(process.env.FIREBASE_EMAIL,process.env.FIREBASE_PASSWORD).catch(function(e){var n=e.code,t=e.message;return console.error("Sign in failed ("+n+"): "+t),e})}function a(e){return j(this,void 0,void 0,function(){var n,t,r,o,i;return M(this,function(s){switch(s.label){case 0:return n=e.userId,t=e.token,r=e.lang,console.log("createNotificationKey "),o="zh-hk"===r?"zh_hk":"en",[4,G("https://android.googleapis.com/gcm/notification",{method:"POST",headers:new Headers({"Content-Type":"application/json",Authorization:"key="+process.env.FIREBASE_SERVER_KEY,project_id:process.env.FIREBASE_MESSAGING_SENDER_ID}),body:JSON.stringify({operation:"create",notification_key_name:n+"_"+o,registration_ids:[t]})}).then(function(e){return e.json()}).catch(function(e){console.error("userGroups: failed to create notification key: "+e)})];case 1:return i=s.sent(),console.log("notification key is: "+i),console.log(i),console.log(n+"_"+o),[2,i.notification_key]}})})}function u(e){return j(this,void 0,void 0,function(){var n,t,r,o;return M(this,function(i){switch(i.label){case 0:return n=e.userId,t=e.lang,console.log("inside retrieveNotificationKey"),r="zh-hk"===t?"zh_hk":"en",[4,G("https://android.googleapis.com/gcm/notification?notification_key_name="+n+"_"+r,{method:"GET",headers:new Headers({"Content-Type":"application/json",Authorization:"key="+process.env.FIREBASE_SERVER_KEY,project_id:process.env.FIREBASE_MESSAGING_SENDER_ID}),body:JSON.stringify({})}).then(function(e){return e.json()}).then(function(e){if(e.error)throw new Error(e.error);return e}).catch(function(e){console.error("userGroups: failed to retrieve notification key from userId "+n+": "+e)})];case 1:return o=i.sent(),console.info(o),[2,o.notification_key]}})})}function c(e,n){return j(this,void 0,void 0,function(){var t,i,c,f,l,d,h,p,b;return M(this,function(v){switch(v.label){case 0:return t=n.userId,i=n.token,c=n.lang,f=n.type,console.log(i),l="zh-hk"===c?"zh_hk":"en",[4,u(n)];case 1:return d=v.sent(),console.log("retrieveNotificationKey: "+d),d?[3,3]:[4,a(n)];case 2:return d=v.sent(),[3,5];case 3:return console.log(e+"ing token to device group"),[4,G("https://android.googleapis.com/gcm/notification",{method:"POST",headers:new Headers({"Content-Type":"application/json",Authorization:"key="+process.env.FIREBASE_SERVER_KEY,project_id:process.env.FIREBASE_MESSAGING_SENDER_ID}),body:JSON.stringify({operation:e,notification_key_name:t+"_"+l,notification_key:d,registration_ids:[i]})}).then(function(e){return e.text()}).then(function(e){if(console.log(e),JSON.parse(e).error)throw new Error(e);return e}).catch(function(n){console.error("userGroups: failed to "+e+" token "+i+" to notification key: "+d),console.log(n)})];case 4:d=v.sent(),v.label=5;case 5:return d?(console.log("saving stuff to database"),h=r(o()),[4,s(o())]):[3,8];case 6:return p=v.sent(),console.log("signed in"),b=h.ref("deviceGroup/"+t+"_"+l).push(),console.log("saving stuff to database"),[4,h.ref("deviceGroup/"+t+"_"+l+"/"+b.key).set({type:f,token:i})];case 7:v.sent(),v.label=8;case 8:return[2,d]}})})}function f(e){return j(this,void 0,void 0,function(){return M(this,function(n){switch(n.label){case 0:return[4,c("add",e)];case 1:return[2,n.sent()]}})})}function l(e,n){return q(this,void 0,void 0,function(){var t;return K(this,function(r){return t=G("https://fcm.googleapis.com/fcm/send",{method:"POST",headers:new Headers({"Content-Type":"application/json",Authorization:"key="+process.env.FIREBASE_SERVER_KEY,project_id:process.env.FIREBASE_SERVER_KEY}),body:JSON.stringify({to:e,notification:n,data:{volume:"3.21.15",contents:"http://www.news-magazine.com/world-week/21659772"},message:{notification:n}})}).then(function(e){return e.json()}).then(function(e){if(console.log(e),e.error)throw new Error(e)}).catch(function(e){console.error(e)}),[2,t]})})}function d(e){var n=(r(o()),{title:e.title,body:e.message}),t={userId:e.userId,lang:e.lang};return R.Observable.fromPromise(u(t)).flatMap(function(e){return console.info("found notification id: "+e),R.Observable.fromPromise(l(e,n))}).flatMap(function(e){return R.Observable.of(z({},e,{status:"success"}))})}function h(e,n,t,r){var o;d(e).subscribe(function(e){o={status:"success",result:e}},function(e){o={status:"failure",result:e}},function(){console.info(o),t.send(JSON.stringify(o))})}function p(){return new Promise(function(e,n){var t=i();new C.auth.JWT(t.client_email,void 0,t.private_key,D,void 0).authorize(function(t,r){if(t)return void n(t);console.log("fuck"),console.log(r),e(r.access_token)})})}function b(e,n){return J(this,void 0,void 0,function(){var t,r;return Q(this,function(o){switch(o.label){case 0:return[4,p()];case 1:return t=o.sent(),console.log(t),r=G(process.env.FIREBASE_PUSH_NOTIFICATION_WEB,{method:"POST",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+t}),body:JSON.stringify({message:{token:e,notification:n}})}).then(function(e){return e.json()}).then(function(e){if(console.log(e),e.error)throw new Error(e)}).catch(function(e){console.error(e)}),[2,r]}})})}function v(e,n){return J(this,void 0,void 0,function(){return Q(this,function(e){return[2,"foo"]})})}function g(e,n){return J(this,void 0,void 0,function(){return Q(this,function(e){return[2,"foo"]})})}function y(e,n,t){return J(this,void 0,void 0,function(){var r;return Q(this,function(o){switch(o.label){case 0:switch(r=e){case"web":return[3,1];case"android":return[3,3];case"ios":return[3,5]}return[3,7];case 1:return[4,b(n,t)];case 2:return[2,o.sent()];case 3:return[4,v(n,t)];case 4:return[2,o.sent()];case 5:return[4,g(n,t)];case 6:return[2,o.sent()];case 7:return[2]}})})}function w(e){var n={title:e.title,body:e.message};return R.Observable.fromPromise(y(e.type,e.token,n)).flatMap(function(){return R.Observable.of({status:"success",msg:"message sent to token "+e.token})})}function m(e,n,t,r){var o;w(e).subscribe(function(e){o={status:"success",result:e}},function(e){o={status:"failure",result:e}},function(){console.info(o),t.send(JSON.stringify(o))})}function k(e,n){return L(this,void 0,void 0,function(){var t,r;return Y(this,function(i){switch(i.label){case 0:return[4,s(o())];case 1:return t=i.sent(),[4,e.ref("/users/"+n).once("value")];case 2:return r=i.sent(),[2,r.val()]}})})}function E(e,n){return L(this,void 0,void 0,function(){var t,r,i,a,u;return Y(this,function(c){switch(c.label){case 0:return t=n.userId,r=n.token,i=n.type,a=n.lang,[4,s(o())];case 1:return u=c.sent(),[4,e.ref("users/"+t+"/"+r).set({lang:a,type:i})];case 2:return[2,c.sent()]}})})}function _(e,n){return R.Observable.fromPromise(E(e,n)).flatMap(function(e){return R.Observable.of({status:"success",msg:"saved user successfully"})}).do(function(){console.log("saved user")})}function I(e){return console.log(e),R.Observable.fromPromise(f(e)).flatMap(function(e){return R.Observable.of({status:"success",msg:"created notification key successfully",notification_key:e})}).do(function(){console.log("created notification key")})}function S(e,n,t,i){var s=(e.userId,e.token,e.lang,{status:"success",result:[]}),a=r(o()),u=_(a,e),c=I(e);R.Observable.merge(u,c).subscribe(function(e){s.result.push(e),console.log(e)},function(e){s.status="failure",s.result.push({status:"failure",result:e})},function(){console.log("finished, sending the stuff"),console.info(s),t.send(JSON.stringify(s))})}function x(e,n,t,i){return W(this,void 0,void 0,function(){var n,i,s;return Z(this,function(a){switch(a.label){case 0:return i=r(o()),[4,k(i,e)];case 1:return s=a.sent(),n={status:"success",result:s},t.send(JSON.stringify(n)),[2]}})})}function A(e,n,t){var r=new $({userId:e.body.userId,password:e.body.password});$.findOne({userId:e.body.userId},function(o,i){if(o&&n.send({status:"failure",msg:"database error"}),i)return void n.send({status:"failure",msg:"Account with that userId "+e.body.userId+" already exists."});r.save(function(e){if(e)return t(e);var o=ee.sign({id:r._id},"linkinpark",{expiresIn:86400});n.send({status:"success",auth:!0,token:o})})})}function O(e,n,t){$.findOne({email:e.body.email},function(t,r){if(t)return n.status(500).send("Error on the server.");if(!r)return n.status(404).send("No user found.");if(!U.compareSync(e.body.password,r.password))return n.status(401).send({auth:!1,token:null});var o=ee.sign({id:r._id},"linkinpark",{expiresIn:86400});n.status(200).send({auth:!0,token:o})})}function N(e,n,t){var r=e.headers["x-access-token"];if(!r)return n.status(401).send({auth:!1,message:"No token provided."});ee.verify(r,"linkinpark",function(e,t){if(e)return n.status(500).send({auth:!1,message:"Failed to authenticate token."});n.status(200).send({auth:!0,message:"Authenticated with token!",decoded:t})})}function P(e,n,t,r){$.findOne({userId:e},function(e,n){if(e)return r(e);n?t.send({status:"found",msg:"Account with that user id already exists."}):t.send({status:"not found",msg:"Account with that user id is available."})})}function T(e){return ne(this,void 0,void 0,function(){var n,t;return te(this,function(r){return(n=e.headers["x-access-token"])?(t=new Promise(function(e,t){ee.verify(n,"linkinpark",function(n,t){n&&e(-1),e(1)})}),[2]):[2,-1]})})}function B(e){e.use(function(e,n,t){if((e.url.indexOf("/user/")>=0||e.url.indexOf("/api/")>=0)&&e.url.indexOf("/user/login")<0){var r=e.headers["x-access-token"];if(!r)return n.status(401).send({auth:!1,message:"No token provided."});ee.verify(r,"linkinpark",function(e,t){if(e)return n.status(500).send({auth:!1,message:"Failed to authenticate token."});n.status(200).send({auth:!0,message:"Authenticated with token."})})}else t()}),e.post("/api/direct-message",function(e,n,t){var r=e.body;m({title:r.title,message:r.message,token:r.token,type:r.type},e,n,t)}),e.post("/api/custom-message",function(e,n,t){var r=e.body;h({userId:r.userId,title:r.title,message:r.message,lang:r.lang},e,n,t)}),e.post("/api/token",function(e,n,t){var r=e.body;S({type:r.type,lang:r.lang,token:r.token,userId:r.userId},e,n,t)}),e.get("/api/tokens/:userId",function(e,n,t){x(e.params.userId,e,n,t)}),e.post("/user/signup",function(e,n,t){A(e,n,t)}),e.get("/user/check/:userId",function(e,n,t){P(e.params.userId,e,n,t)}),e.post("/user/login",function(e,n,t){O(e,n,t)}),e.post("/user/auth",function(e,n,t){N(e,n,t)})}Object.defineProperty(n,"__esModule",{value:!0});var R=t(1),F=t(2);t(3),t(0);global.XMLHttpRequest=t(10).XMLHttpRequest;var G=t(4),j=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new t(function(n){n(e.value)}).then(s,a)}u((r=r.apply(e,n||[])).next())})},M=this&&this.__generator||function(e,n){function t(e){return function(n){return r([e,n])}}function r(t){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(s=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[0,s.value]),t[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(s=u.trys,!(s=s.length>0&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){u.label=t[1];break}if(6===t[0]&&u.label<s[1]){u.label=s[1],s=t;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(t);break}s[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}var o,i,s,a,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},q=(t(6),t(5),this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new t(function(n){n(e.value)}).then(s,a)}u((r=r.apply(e,n||[])).next())})}),K=this&&this.__generator||function(e,n){function t(e){return function(n){return r([e,n])}}function r(t){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(s=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[0,s.value]),t[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(s=u.trys,!(s=s.length>0&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){u.label=t[1];break}if(6===t[0]&&u.label<s[1]){u.label=s[1],s=t;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(t);break}s[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}var o,i,s,a,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},z=this&&this.__assign||Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++){n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},C=t(6),D="https://www.googleapis.com/auth/firebase.messaging",J=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new t(function(n){n(e.value)}).then(s,a)}u((r=r.apply(e,n||[])).next())})},Q=this&&this.__generator||function(e,n){function t(e){return function(n){return r([e,n])}}function r(t){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(s=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[0,s.value]),t[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(s=u.trys,!(s=s.length>0&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){u.label=t[1];break}if(6===t[0]&&u.label<s[1]){u.label=s[1],s=t;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(t);break}s[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}var o,i,s,a,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},L=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new t(function(n){n(e.value)}).then(s,a)}u((r=r.apply(e,n||[])).next())})},Y=this&&this.__generator||function(e,n){function t(e){return function(n){return r([e,n])}}function r(t){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(s=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[0,s.value]),t[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(s=u.trys,!(s=s.length>0&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){u.label=t[1];break}if(6===t[0]&&u.label<s[1]){u.label=s[1],s=t;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(t);break}s[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}var o,i,s,a,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},W=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new t(function(n){n(e.value)}).then(s,a)}u((r=r.apply(e,n||[])).next())})},Z=this&&this.__generator||function(e,n){function t(e){return function(n){return r([e,n])}}function r(t){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(s=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[0,s.value]),t[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(s=u.trys,!(s=s.length>0&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){u.label=t[1];break}if(6===t[0]&&u.label<s[1]){u.label=s[1],s=t;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(t);break}s[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}var o,i,s,a,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},U=t(7),H=t(11),V=new H.Schema({userId:String,password:String},{timestamps:!0});V.pre("save",function(e){var n=this;if(!n.isModified("password"))return e();U.genSalt(10,function(t,r){if(t)return e(t);U.hash(n.password,r,void 0,function(t,r){if(t)return e(t);n.password=r,e()})})}),V.methods.comparePassword=function(e,n){U.compare(e,this.password,function(e,t){n(e,t)})};var X=H.model("User",V),$=X,ee=t(8);n.verifyAuthToken=T,n.default=B;var ne=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new t(function(n){n(e.value)}).then(s,a)}u((r=r.apply(e,n||[])).next())})},te=this&&this.__generator||function(e,n){function t(e){return function(n){return r([e,n])}}function r(t){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(s=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[0,s.value]),t[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(s=u.trys,!(s=s.length>0&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){u.label=t[1];break}if(6===t[0]&&u.label<s[1]){u.label=s[1],s=t;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(t);break}s[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}var o,i,s,a,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a}},function(e,n){e.exports=require("xmlhttprequest")},function(e,n){e.exports=require("mongoose")}]);